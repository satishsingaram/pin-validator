pipeline {
    agent any
    tools {
            gradle 'myGradle'
    }

    triggers {
        pollSCM('*/5 * * * *')
    }

    dir("error-logger") {
        stages {
            stage('Compile') {
                steps {
                    sh 'gradle tasks --all'
                }
            }
            stage('Unit Tests') {
                steps {
                    sh 'gradle build'
                }
                post {
                    always {
                        junit '**/build/test-results/test/TEST-*.xml'
                    }
                }
            }
        }
        post {
            failure {
                echo 'build failed'
            }
        }

    }


}